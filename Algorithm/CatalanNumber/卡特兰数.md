### 卡特兰数

#### 卡特兰数的概念
卡特兰数又称卡塔兰数，英文名Catalan number，是组合数学中一个常出现在各种计数问题中出现的数列。其前几项为：
1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862, 16796, 58786, 208012, 742900, 2674440, 9694845, 35357670,
129644790, 477638700, 1767263190, 6564120420, 24466267020, 91482563640, 343059613650, 1289904147324, 
4861946401452, ...

#### 卡特兰数的公式
k(0) = 1, k(1) = 1时，如果接下来的项满足：
k(n) = k(0) * k(n - 1) + k(1) * k(n - 2) + ... + k(n - 2) * k(1) + k(n - 1) * k(0)
或者
k(n) = c(2n, n) - c(2n, n-1)
或者
k(n) = c(2n, n) / (n + 1)
就说这个表达式，满足卡特兰数，常用的是范式1和2，3几乎不会使用到

#### 卡特兰数的公式的证明过程以及重要思想

##### 卡特兰数的公式证明过程
假设有N个左括号(，有N个右括号)
必须一对左右括号完全匹配才算达到要求，例如：(), (()),(()()),()(),((()()()))
那么只要右括号的数量小于等于左括号的数量，就能达到要求，反之如果右括号的数量大于左括号的数量，那么一定不会达到要求

假设有N个左括号，有N个右括号，不直接求合法的数量，而且求不合法的数量
总排列数 - 不合法数 = 合法数
c(2n, n) 表示一共有2n个括号，有n个左括号/右括号的总排列数
c(2n, n - 1)表示n - 1个左括号的不合法数
c(2n, n + 1)表示n + 1个右括号的不合法数

既可以是c(2n, n) - c(2n, n - 1) n表示左括号
也可以是c(2n, n) - c(2n, n + 1) n表示右括号

##### 卡特兰数的公式重要思想
假设有两个集合A和B，A和B毫无关系
如果A中有元素对应B中元素的映射 那么A <= B
如果B中有元素对应A中元素的映射 那么B <= A
所以A集合元素个数 == B集合元素个数，并且是A集合的元素和B集合的元素一一对映

总结：集合A和集合B，只有两个集合互相之间有映射关系，那么集合A和集合B的数量就一样多

#### 卡特兰数的实际应用
##### 1、N个数出栈入栈的实例
合法的：↓ ↓ ↑ ↑     ↓ ↑ ↓ ↑
不合法：↑ ↑ ↓ ↓     ↑ ↓ ↑ ↓     ↑ ↓ ↓ ↑ ，都没有入栈，哪里来的出栈

1. 本质上就是括号序列问题
2. 左括号表示入栈，右括号表示出栈
3. 其解等于第n个Catalan数

##### 2、01序列
给出一个n，要求一个长度为2n的01序列，使得序列的任意前缀中1的个数不少于0的个数， 有多少个不同的01序列?
以下为长度为6的序列并且都是合法的:
111000 101100 101010 110010 110100

1. 01序列本质上就是入栈出栈问题
2. 因为对于每一个数来说，必须进栈一次、出栈一次。我们把进栈设为状态‘1’，出栈设为状态‘0’。
   n个数的所有状态对应n个1和n个0组成的2n位二进制数。
3. 由于等待入栈的操作数按照1‥n的顺序排列、入栈的操作数b大于等于出栈的操作数a(a≤b)，
   因此输出序列的总数目=由左而右扫描由n个1和n个0组成的2n位二进制数，1的累计数不小于0的累计数的方案种数。
4. 其解等于第n个Catalan数

##### 3、括号序列
n对括号有多少种匹配方式？
例如3对括号构成的合法括号序列有C3 = 5个：((()))，()(())，()()()，(())()，(()())。

1. 本质就是“01序列”的变式
2. 我们把左括号设为状态‘1’，右括号设为状态‘0’。n对括号的所有状态对应n个 ‘1’ 和n个 ‘0’ 组成的2n位二进制数。
   由于必须先有左括号，才能匹配右括号，因此输出正确括号序列的总数目=由左而右扫描由n个 ‘1’ 和n个 ‘0’ 组成的2n位二进制数，
   1的累计数不小于0的累计数的方案种数。
3. 其解等于第n个Catalan数

   
##### 4、二叉树节点问题
n个二叉树节点，有多少种摆法
情况1：
假设根节点左子树为0个节点，除去根节点，右子树为n - 1个节点
-       o
-     /   \
- 左0个  右n-1个
一共有k(0) * k(n - 1)种摆法
  
情况2：
假设根节点左子树为1个节点，除去根节点，右子树为n - 2个节点
-       o
-     /   \
- 左1个  右n-2个
一共有k(1) * k(n - 2)种摆法
  
情况3：
假设根节点左子树为2个节点，除去根节点，右子树为n - 3个节点
-       o
-     /   \
- 左2个  右n-3个
一共有k(2) * k(n - 3)种摆法
  
思路：（递归分治思想）

1. 推导出卡特兰数公式：
二叉树节点有0个节点：k(0) = 1
二叉树节点有1个节点：k(1) = 1
二叉树节点有n个节点：k(n) = k(0) * k(n - 1) + k(1) * k(n - 2) + ... + k(n - 2) * k(1) + k(n - 1) * k(0)
2. 计算结果：k(n) = c(2n, n) - c(2n, n-1)
3. 其解等于第n个Catalan数

##### 5、整数和偶数一样多的问题
因为任何一个整数 * 2 == 偶数
任何一个偶数 / 2 == 整数
所以整数和偶数一样多
在数学上，这叫等势，还有希尔伯特旅馆

##### 6、找零问题
2n个人要买票价为五元的电影票，每人只买一张，但是售票员没有钱找零。其中，n个人持有五元，另外n个人持有十元，
问在不发生找零困难的情况下，有多少种排队方法？

1. 其本质是“01序列”的变式：
2. 将持有五元的人设为状态‘1’，持有十元的人设为状态‘0’。2n个人的所有状态对应n个 ‘1’ 和n个 ‘0’ 组成的2n位二进制数。 
   由于必须先有1个持有五元的人排在1个持有十元的人的前面，才能不发生找零困难，
   因此不发生找零困难排队方法的总数目 = 由左而右扫描由n个 ‘1’ 和n个 ‘0’ 组成的2n位二进制数，
   1的累计数不小于0的累计数的方案种数。
3. 其解等于第n个Catalan数。

##### 7、

#### 卡特兰数的算法原型在做题时怎么发现？
1）如果像题目一一样，这个太明显了，你一定能发现
2）看看题目是不是类题目二问题，比如：
人员站队问题
入栈出栈问题
3）熟记卡特兰数公式1，公式2
4）需要对括号序列合法问题要有敏感性，而不是对卡特兰数公式：c(2n, n) - c(2n, n - 1)有敏感性！
5）发现某个公式符合卡特兰数公式1，那就是卡特兰数问题，公式1单独进行敏感度一定程度的训练，比如：二叉树节点摆法问题
6）卡特兰数公式1跟暴力递归有很大的关系